<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Today I learnt about SQL Alchemy relationship filters ⚗️" />
<meta name="author" content="Pete Graham" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I was working on an SQLAlchemy project where I wanted to select all the tasks on a list which hadn’t been completed, it turns out this custom relationship filter can be done with the use of primaryjoin parameter. The values provided are Python code rather than raw SQL. tasks = relationship( &quot;Task&quot;, order_by=&quot;Task.priority&quot;, primaryjoin=&quot;and_(Task.list_id==List.id, Task.completed==None)&quot;, back_populates=&quot;task_list&quot;, )" />
<meta property="og:description" content="I was working on an SQLAlchemy project where I wanted to select all the tasks on a list which hadn’t been completed, it turns out this custom relationship filter can be done with the use of primaryjoin parameter. The values provided are Python code rather than raw SQL. tasks = relationship( &quot;Task&quot;, order_by=&quot;Task.priority&quot;, primaryjoin=&quot;and_(Task.list_id==List.id, Task.completed==None)&quot;, back_populates=&quot;task_list&quot;, )" />
<link rel="canonical" href="https://petegraham.com/pr-preview/pr-15/TIL/sqlalchemy_relationship_filter/" />
<meta property="og:url" content="https://petegraham.com/pr-preview/pr-15/TIL/sqlalchemy_relationship_filter/" />
<meta property="og:site_name" content="Pete Graham - CTO" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-26T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Today I learnt about SQL Alchemy relationship filters ⚗️" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Pete Graham"},"dateModified":"2021-08-26T00:00:00+00:00","datePublished":"2021-08-26T00:00:00+00:00","description":"I was working on an SQLAlchemy project where I wanted to select all the tasks on a list which hadn’t been completed, it turns out this custom relationship filter can be done with the use of primaryjoin parameter. The values provided are Python code rather than raw SQL. tasks = relationship( &quot;Task&quot;, order_by=&quot;Task.priority&quot;, primaryjoin=&quot;and_(Task.list_id==List.id, Task.completed==None)&quot;, back_populates=&quot;task_list&quot;, )","headline":"Today I learnt about SQL Alchemy relationship filters ⚗️","mainEntityOfPage":{"@type":"WebPage","@id":"https://petegraham.com/pr-preview/pr-15/TIL/sqlalchemy_relationship_filter/"},"url":"https://petegraham.com/pr-preview/pr-15/TIL/sqlalchemy_relationship_filter/"}</script>
<!-- End Jekyll SEO tag -->

  <title>Pete Graham - CTO - Today I learnt about SQL Alchemy relationship filters ⚗️</title>
  <link rel="apple-touch-icon" href='/pr-preview/pr-15/assets/images/apple-touch-icon.png'>
  <link rel="icon" type="image/svg+xml" href='/pr-preview/pr-15/assets/images/favicon.svg'>
  <link rel="icon" href='/pr-preview/pr-15/assets/images/favicon.ico'>
  <link rel="manifest" href='/pr-preview/pr-15/assets/images/site.webmanifest'>
  <link rel="icon" type="image/png" sizes="192x192" href='/pr-preview/pr-15/assets/images/web-app-manifest-192x192.png'>
  <link rel="icon" type="image/png" sizes="512x512" href='/pr-preview/pr-15/assets/images/web-app-manifest-512x512.png'>
  <link rel="stylesheet" href='/pr-preview/pr-15/assets/css/style.css'>
  <link rel="alternate" type="application/rss+xml" title="My Blog" href='/pr-preview/pr-15/rss.xml'>
  <link rel="stylesheet" href='/pr-preview/pr-15/assets/css/highlight.css'>
</head>
<body>

  <nav class="main-nav">
  <div class="nav-content">
    <a class="brand" href='/pr-preview/pr-15/'>petegraham.com</a>
    <a href='/pr-preview/pr-15/blog/'>Articles</a>
    <a href='/pr-preview/pr-15/TIL/'>TIL </a>
    <a href='/pr-preview/pr-15/'>About</a>
  </div>
</nav>


  

  <section id="wrapper" class="">
    <article class="post">
    <header>
        <h1>Today I learnt about SQL Alchemy relationship filters ⚗️</h1>
        <h2 class="headline"></h2>
    </header>
    <section id="post-body">

        <p>I was working on an SQLAlchemy project where I wanted to select all the tasks on a list which hadn’t been completed, it turns out this custom relationship filter can be done with the use of <code class="language-plaintext highlighter-rouge">primaryjoin</code> parameter. The values provided are Python code rather than raw SQL.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tasks = relationship(
    "Task",
    order_by="Task.priority",
    primaryjoin="and_(Task.list_id==List.id, Task.completed==None)",
    back_populates="task_list",
)
</code></pre></div></div>


    </section>
</article>

<nav id="post-nav">
    
        <span class="prev">
                <a href='/pr-preview/pr-15/TIL/postgres_user/'>
                    <span class="arrow">←</span> Previous TIL
                </a>
        </span>
    
    
        <span class="next">
            <a href='/pr-preview/pr-15/TIL/js_print/'>
                Next TIL <span class="arrow">→</span>
            </a>
        </span>
    
</nav>

<footer id="post-meta" class="clearfix">
    <a href='/pr-preview/pr-15/'>
        <img class="avatar" src='/pr-preview/pr-15/assets/images/avatar.png'>
        <div>
            <span class="dark">Pete Graham</span>
            <span>Bridging Technology Strategy & Business Scaling</span>
        </div>
    </a>

</footer>

  </section>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src='/pr-preview/pr-15/assets/js/main.js'></script>
  <script src='/pr-preview/pr-15/assets/js/highlight.js'></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-1161798-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>



